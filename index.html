<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cover Letter Generator - Jan Skaaden</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        h1 { color: #1a1a1a; margin-bottom: 8px; }
        .subtitle { color: #666; margin-bottom: 32px; }
        .card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .card h2 { margin-top: 0; font-size: 18px; }
        label { display: block; font-weight: 500; margin-bottom: 8px; color: #444; }
        textarea, input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }
        textarea:focus, input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: background 0.2s;
        }
        button:hover { background: #1d4ed8; }
        .analysis {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            display: none;
        }
        .analysis.visible { display: block; }
        .analysis h3 { margin: 0 0 12px 0; font-size: 14px; color: #0369a1; }
        .tag {
            display: inline-block;
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 13px;
            margin: 3px;
        }
        .output { display: none; }
        .output.visible { display: block; }
        #coverLetter {
            white-space: pre-wrap;
            font-family: inherit;
            line-height: 1.8;
            background: #fafafa;
            padding: 24px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            min-height: 300px;
        }
        #coverLetter[contenteditable]:focus {
            outline: none;
            border-color: #2563eb;
            background: white;
        }
        .actions { display: flex; gap: 12px; margin-top: 16px; }
        .actions button { flex: 1; }
        .copy-btn { background: #059669; }
        .copy-btn:hover { background: #047857; }
        .edit-hint { font-size: 13px; color: #666; margin-bottom: 8px; }
        .structure-hint {
            background: #fef3c7;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .structure-hint strong { color: #92400e; }
    </style>
</head>
<body>
    <h1>Cover Letter Generator</h1>
    <p class="subtitle">Paste a job description ‚Üí get a narrative cover letter (not a CV summary)</p>

    <div class="structure-hint">
        <strong>üìù This tool generates story-driven cover letters:</strong><br>
        Hook (why this company) ‚Üí Your angle (the pivot story) ‚Üí Proof (one compelling example) ‚Üí Fit (why you + them) ‚Üí Confident close
    </div>

    <div class="card">
        <h2>Job Details</h2>
        <div class="row">
            <div>
                <label for="company">Company Name *</label>
                <input type="text" id="company" placeholder="e.g., Spotify">
            </div>
            <div>
                <label for="role">Role Title *</label>
                <input type="text" id="role" placeholder="e.g., Product Analyst">
            </div>
        </div>
        <label for="jobDesc">Job Description *</label>
        <textarea id="jobDesc" rows="12" placeholder="Paste the full job posting here..."></textarea>

        <button onclick="generateLetter()" style="margin-top: 20px;">‚ú® Generate Cover Letter</button>

        <div id="analysis" class="analysis">
            <h3>üîç Detected themes ‚Üí Narrative approach:</h3>
            <div id="narrativeApproach"></div>
        </div>
    </div>

    <div id="output" class="output">
        <div class="card">
            <h2>Your Cover Letter</h2>
            <p class="edit-hint">üí° Click the text to edit directly. This is a starting point‚Äîpersonalize it.</p>
            <div id="coverLetter" contenteditable="true"></div>
            <div class="actions">
                <button class="copy-btn" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
                <button onclick="generateLetter()" style="background: #6366f1;">üîÑ Regenerate</button>
            </div>
        </div>
    </div>

    <script>
        // =====================================================================
        // NARRATIVE BUILDING BLOCKS
        // =====================================================================

        // HOOKS - Opening lines that reference the company/role specifically
        const hooks = {
            experimentation: [
                "What caught my attention about {company} is the emphasis on experimentation‚Äînot just running tests, but building a culture where decisions are validated before resources are committed.",
                "I noticed {company} treats experimentation as core to how product decisions get made, not just a nice-to-have. That's rare, and it's exactly the environment I'm looking for."
            ],
            growth: [
                "Growth roles often end up being about dashboards and reporting. What stands out about this {role} position is that it seems to be about actually shaping what gets built.",
                "I've been looking for a growth role where the work goes beyond tracking metrics‚Äîwhere there's real ownership over what to try next. This role at {company} looks like that."
            ],
            product: [
                "I've spent four years working adjacent to product decisions‚Äîanalyzing the data that informs them, validating features before they ship, measuring whether they worked. I'm ready to own more of the decision-making itself.",
                "What draws me to this role is the chance to be closer to the 'what should we build' question, not just the 'how did it perform' question."
            ],
            cx: [
                "I've always believed that good analytics should ultimately improve how people experience a product. This {role} role at {company} seems to share that philosophy.",
                "What resonates about {company}'s approach is the focus on customer experience as a driver of decisions, not just a metric to report on."
            ],
            startup: [
                "I'm drawn to {company} because the stage you're at means decisions actually move fast‚Äîand the person in this role will have real impact on what gets prioritized.",
                "What excites me about {company} is the opportunity to wear multiple hats and have direct impact, rather than being one analyst among many."
            ],
            remote: [
                "I've been looking for a remote role where collaboration still feels tight‚Äîwhere async work is intentional, not just tolerated. {company} seems to get this right.",
            ],
            default: [
                "I came across this {role} role at {company} and it felt like a fit worth pursuing‚Äînot just because of the responsibilities, but because of where it sits: at the intersection of data and product decisions.",
            ]
        };

        // PIVOT STORY - The narrative of why you're transitioning
        const pivotStories = {
            pm: "For the past four years, I've been the person who helps product teams figure out what's broken and what to prioritize. I've built the analytical foundation for decisions‚Äîbut increasingly, I want to own the decisions themselves. This role feels like the right next step.",
            analyst: "I've spent four years in ecommerce, working across the full stack of product analytics‚Äîfunnels, experimentation, tracking, KPIs. What I've learned is that I'm most energized when my analysis actually changes what gets built. That's the kind of impact I'm looking for in this role.",
            growth: "My background is in ecommerce analytics and product operations. I've worked on the measurement side of growth‚Äîfiguring out what's working, what's not, and where to focus. Now I want to be closer to the levers, not just the metrics.",
            ops: "I've worked in product operations and analytics, which means I've seen how decisions get made‚Äîand how often they're made without the right data. I want to be in a role where I can bridge that gap more directly."
        };

        // PROOF POINTS - Compelling examples (not CV bullets)
        const proofPoints = {
            experimentation: "At Mytheresa, I've run A/B tests where the 'obvious' winner turned out to be wrong once we looked at downstream behavior. Learning to present those trade-offs clearly‚Äîso stakeholders trust the process even when results are counterintuitive‚Äîhas been one of the most valuable skills I've developed.",
            funnel: "At Mytheresa, I own the process of investigating funnel anomalies. When conversion drops, I'm the one figuring out whether it's a bug, a tracking issue, or a real behavior change. That detective work‚Äîand knowing how to prioritize what to fix‚Äîis something I'd bring to {company}.",
            prioritization: "One thing I've gotten good at is framing problems clearly for product teams. When there are ten things that could be fixed, I help figure out which two actually matter. That usually means quantifying impact, but also understanding what the team can realistically ship.",
            stakeholder: "At Bang & Olufsen, I worked with market heads across five regions who all had different priorities. I learned to translate data into language that made sense for each audience‚Äîand to push back when the data didn't support what someone wanted to hear.",
            cx: "At Bang & Olufsen, I led a project analyzing customer feedback across touchpoints. We found patterns that weren't obvious from the quantitative data alone‚Äîand fixing them moved CSAT from 65% to 85%. That mix of qual and quant is something I'd bring to this role.",
            launch: "I led the operational side of launching Bang & Olufsen's refurbished products platform. It meant coordinating across commercial, ops, and experience teams‚Äîand learning that successful launches are as much about alignment as execution.",
            retention: "At reMarkable, I worked on the transition from free to paid cloud service. That meant understanding why users stayed or left, and helping shape the retention strategy. It was my first real exposure to product thinking, and it stuck with me.",
            default: "In my current role at Mytheresa, I've become the person teams come to when they need to understand what's happening in the funnel and what to do about it. I want to take that skill set somewhere it can have broader impact."
        };

        // FIT STATEMENTS - Why you + them specifically
        const fitStatements = {
            experimentation: "I'd bring a rigorous approach to experimentation‚Äînot just running tests, but making sure the organization learns from them and trusts the results.",
            growth: "I'd bring a mindset focused on finding leverage: what's the smallest change that moves the biggest metric? And how do we validate that before going all-in?",
            product: "I'd bring an analytical foundation to product thinking‚Äîthe ability to frame problems clearly, quantify trade-offs, and separate signal from noise.",
            cx: "I'd bring a habit of connecting data to customer experience‚Äîalways asking 'what does this mean for the person using the product?'",
            stakeholder: "I'd bring experience bridging data and business teams‚Äîtranslating insights into language that drives action, not just reports that get filed away.",
            default: "I'd bring structured thinking, a bias toward clarity, and four years of pattern recognition from ecommerce‚Äîknowing what tends to matter and what tends to be noise."
        };

        // =====================================================================
        // DETECTION & GENERATION
        // =====================================================================

        function detectThemes(jobDesc) {
            const jd = jobDesc.toLowerCase();
            const themes = [];

            if (/experiment|a\/b test|hypothesis|test and learn/.test(jd)) themes.push('experimentation');
            if (/growth|acquisition|retention|conversion/.test(jd)) themes.push('growth');
            if (/product manager|roadmap|backlog|product team/.test(jd)) themes.push('product');
            if (/customer experience|user experience|ux|csat|nps|friction/.test(jd)) themes.push('cx');
            if (/startup|series [a-c]|early stage|fast-paced/.test(jd)) themes.push('startup');
            if (/remote|distributed/.test(jd)) themes.push('remote');
            if (/funnel|drop-off|checkout|conversion rate/.test(jd)) themes.push('funnel');
            if (/prioriti|trade-off|impact|backlog/.test(jd)) themes.push('prioritization');
            if (/stakeholder|cross-functional|executive|present/.test(jd)) themes.push('stakeholder');
            if (/launch|go-to-market|rollout/.test(jd)) themes.push('launch');

            return themes.length > 0 ? themes : ['default'];
        }

        function pickRandom(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateLetter() {
            const company = document.getElementById('company').value.trim();
            const role = document.getElementById('role').value.trim();
            const jobDesc = document.getElementById('jobDesc').value.trim();

            if (!company || !role || !jobDesc) {
                alert('Please fill in company name, role title, and job description.');
                return;
            }

            const themes = detectThemes(jobDesc);
            const primaryTheme = themes[0];
            const secondaryTheme = themes[1] || themes[0];

            // Show what we detected
            document.getElementById('analysis').classList.add('visible');
            document.getElementById('narrativeApproach').innerHTML = `
                <span class="tag">Primary: ${primaryTheme}</span>
                <span class="tag">Secondary: ${secondaryTheme}</span>
                <br><br>
                <small>Using: ${primaryTheme} hook ‚Üí pivot story ‚Üí ${secondaryTheme} proof point ‚Üí ${primaryTheme} fit statement</small>
            `;

            // Determine pivot story type based on role
            let pivotType = 'analyst';
            if (/product manager|product owner/i.test(role)) pivotType = 'pm';
            else if (/growth/i.test(role)) pivotType = 'growth';
            else if (/operations|ops/i.test(role)) pivotType = 'ops';

            // Build the letter
            const hookOptions = hooks[primaryTheme] || hooks.default;
            const hook = pickRandom(hookOptions)
                .replace('{company}', company)
                .replace('{role}', role);

            const pivot = pivotStories[pivotType];

            const proofTheme = themes.find(t => proofPoints[t]) || 'default';
            const proof = (proofPoints[proofTheme] || proofPoints.default)
                .replace('{company}', company);

            const fit = (fitStatements[primaryTheme] || fitStatements.default);

            // Assemble with narrative flow
            const letter = `Dear Hiring Team,

${hook}

${pivot}

${proof}

${fit}

I'd be glad to discuss how my background fits what you're building at ${company}.

Best,
Jan Skaaden
janskaaden@gmail.com | +34 663 471 415
linkedin.com/in/janskaaden`;

            document.getElementById('coverLetter').innerText = letter;
            document.getElementById('output').classList.add('visible');
            document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
        }

        function copyToClipboard() {
            const text = document.getElementById('coverLetter').innerText;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = '‚úì Copied!';
                setTimeout(() => btn.textContent = 'üìã Copy to Clipboard', 2000);
            });
        }
    </script>
</body>
</html>
